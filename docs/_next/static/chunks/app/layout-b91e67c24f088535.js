(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{23044:(e,t,s)=>{Promise.resolve().then(s.bind(s,36439))},36439:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var a=s(95155),r=s(12115),i=s(4147),n=s.n(i),u=s(38489),l=s.n(u),o=s(11432),h=s(84403),c=s(47702),d=s(15586),f=s(99323),y=class extends f.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){let a=t.queryKey,r=t.queryHash??(0,h.F$)(a,t),i=this.get(r);return i||(i=new c.X({client:e,queryKey:a,queryHash:r,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){d.j.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,h.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,h.MK)(e,t)):t}notify(e){d.j.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){d.j.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){d.j.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},m=s(1049),p=class extends f.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#s=new Map,this.#a=0}#t;#s;#a;build(e,t,s){let a=new m.s({mutationCache:this,mutationId:++this.#a,options:e.defaultMutationOptions(t),state:s});return this.add(a),a}add(e){this.#t.add(e);let t=g(e);if("string"==typeof t){let s=this.#s.get(t);s?s.push(e):this.#s.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=g(e);if("string"==typeof t){let s=this.#s.get(t);if(s){if(s.length>1){let t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&this.#s.delete(t)}}}this.notify({type:"removed",mutation:e})}canRun(e){let t=g(e);if("string"!=typeof t)return!0;{let s=this.#s.get(t),a=s?.find(e=>"pending"===e.state.status);return!a||a===e}}runNext(e){let t=g(e);if("string"!=typeof t)return Promise.resolve();{let s=this.#s.get(t)?.find(t=>t!==e&&t.state.isPaused);return s?.continue()??Promise.resolve()}}clear(){d.j.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#s.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,h.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,h.nJ)(e,t))}notify(e){d.j.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return d.j.batch(()=>Promise.all(e.map(e=>e.continue().catch(h.lQ))))}};function g(e){return e.options.scope?.id}var b=s(34017),v=s(38248);function q(e){return{onFetch:(t,s)=>{let a=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],n=t.state.data?.pageParams||[],u={pages:[],pageParams:[]},l=0,o=async()=>{let s=!1,o=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",()=>{s=!0}),t.signal)})},c=(0,h.ZM)(t.options,t.fetchOptions),d=async(e,a,r)=>{if(s)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);let i={client:t.client,queryKey:t.queryKey,pageParam:a,direction:r?"backward":"forward",meta:t.options.meta};o(i);let n=await c(i),{maxPages:u}=t.options,l=r?h.ZZ:h.y9;return{pages:l(e.pages,n,u),pageParams:l(e.pageParams,a,u)}};if(r&&i.length){let e="backward"===r,t={pages:i,pageParams:n},s=(e?function(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}:w)(a,t);u=await d(t,s,e)}else{let t=e??i.length;do{let e=0===l?n[0]??a.initialPageParam:w(a,u);if(l>0&&null==e)break;u=await d(u,e),l++}while(l<t)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(o,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=o}}}function w(e,{pages:t,pageParams:s}){let a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}var O=class{#r;#i;#n;#u;#l;#o;#h;#c;constructor(e={}){this.#r=e.queryCache||new y,this.#i=e.mutationCache||new p,this.#n=e.defaultOptions||{},this.#u=new Map,this.#l=new Map,this.#o=0}mount(){this.#o++,1===this.#o&&(this.#h=b.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onFocus())}),this.#c=v.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onOnline())}))}unmount(){this.#o--,0===this.#o&&(this.#h?.(),this.#h=void 0,this.#c?.(),this.#c=void 0)}isFetching(e){return this.#r.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),s=this.#r.build(this,t),a=s.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime((0,h.d2)(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#r.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){let a=this.defaultQueryOptions({queryKey:e}),r=this.#r.get(a.queryHash),i=r?.state.data,n=(0,h.Zw)(t,i);if(void 0!==n)return this.#r.build(this,a).setData(n,{...s,manual:!0})}setQueriesData(e,t,s){return d.j.batch(()=>this.#r.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state}removeQueries(e){let t=this.#r;d.j.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let s=this.#r,a={type:"active",...e};return d.j.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(a,t)))}cancelQueries(e,t={}){let s={revert:!0,...t};return Promise.all(d.j.batch(()=>this.#r.findAll(e).map(e=>e.cancel(s)))).then(h.lQ).catch(h.lQ)}invalidateQueries(e,t={}){return d.j.batch(()=>{if(this.#r.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")return Promise.resolve();let s={...e,type:e?.refetchType??e?.type??"active"};return this.refetchQueries(s,t)})}refetchQueries(e,t={}){let s={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(d.j.batch(()=>this.#r.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(h.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(h.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let s=this.#r.build(this,t);return s.isStaleByTime((0,h.d2)(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(h.lQ).catch(h.lQ)}fetchInfiniteQuery(e){return e.behavior=q(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(h.lQ).catch(h.lQ)}ensureInfiniteQueryData(e){return e.behavior=q(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return v.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#r}getMutationCache(){return this.#i}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#u.set((0,h.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#u.values()],s={};return t.forEach(t=>{(0,h.Cp)(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){this.#l.set((0,h.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#l.values()],s={};return t.forEach(t=>{(0,h.Cp)(e,t.mutationKey)&&(s={...s,...t.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,h.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===h.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#r.clear(),this.#i.clear()}},Q=s(35906),C=s(43302),P=s(29214);let A=new O;function D(e){let{children:t}=e,[s,i]=r.useState(!1);async function u(){let e=await C.Kb.getRandomList();C.Sj.insert(e);let t=await P.l_.getShareBill();P.Bu.insert(t),A.invalidateQueries()}return r.useEffect(()=>{s||(u(),i(!0))},[s]),(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{style:{overflow:"hidden",padding:0,margin:0},className:"".concat(n().variable," ").concat(l().variable," antialiased"),children:(0,a.jsx)(Q.Ht,{client:A,children:(0,a.jsx)(o.Ay,{theme:{token:{colorPrimary:"#945034",borderRadius:12,colorLink:"#945034"}},children:t})})})})}},43302:(e,t,s)=>{"use strict";s.d(t,{Hd:()=>m,Kb:()=>d,Sj:()=>h,ln:()=>y,oJ:()=>f});var a=s(14449),r=s(21455),i=s.n(r),n=s(13697),u=s(49113),l=s.n(u),o=s(56818);let h=a.Oh.addCollection(o.q.RandomList);class c extends a.Ay{getRandomList(){return super.getAll(this.store)}async syncRandomList(){let e=h.find({});for(let t of(await super.deleteAll(this.store),e)){let e=l().omit(t,["$loki","meta"]);await super.save(this.store,e)}return e}constructor(...e){super(...e),this.store=o.q.RandomList}}let d=new c;function f(){return h.find({}).sort((e,t)=>i()(t.created_at).isAfter(i()(e.created_at))?1:-1)}async function y(e){let{name:t,list:s}=e,a=await Promise.resolve(h.insert({id:(0,n.A)(),name:t,items:s,created_at:i()().toDate()}));return await d.syncRandomList(),a}async function m(e){let t=await Promise.resolve(h.findAndRemove({id:e}));return await d.syncRandomList(),t}},29214:(e,t,s)=>{"use strict";s.d(t,{Bu:()=>o,HM:()=>d,l_:()=>c,wN:()=>f});var a=s(21455),r=s.n(a),i=s(56818),n=s(14449),u=s(49113),l=s.n(u);let o=n.Oh.addCollection(i.q.ShareBill);class h extends n.Ay{getShareBill(){return super.getAll(this.store)}async syncShareBill(){let e=o.find({});for(let t of(await super.deleteAll(this.store),e)){let e=l().omit(t,["$loki","meta"]);await super.save(this.store,e)}return e}constructor(...e){super(...e),this.store=i.q.ShareBill}}let c=new h;function d(){return o.find({}).sort((e,t)=>new Date(t.created_at).getTime()>new Date(e.created_at).getTime()?1:-1)}async function f(e){let t=await Promise.resolve(o.insert({...e,name:"Chia tiá»n ng\xe0y ".concat(r()().format("DD/MM/YYYY HH:mm:ss")),created_at:r()().toDate()}));return await c.syncShareBill(),t}},56818:(e,t,s)=>{"use strict";s.d(t,{q:()=>a});var a=function(e){return e.RandomList="random_list",e.ShareBill="share_bill",e}({})},14449:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>l,Oh:()=>n});var a=s(51288),r=s.n(a),i=s(56818);let n=new(r())("anuong.db");class u{async init(){return this.database?this.database:new Promise((e,t)=>{let s=window.indexedDB.open("anuong",1);s.onupgradeneeded=()=>{let e=s.result;e.objectStoreNames.contains(i.q.RandomList)||e.createObjectStore(i.q.RandomList,{keyPath:"id",autoIncrement:!0}),e.objectStoreNames.contains(i.q.ShareBill)||e.createObjectStore(i.q.ShareBill,{keyPath:"id",autoIncrement:!0})},s.onsuccess=()=>{this.database=s.result,e(this.database)},s.onerror=()=>{t(s.error)}})}async save(e,t){let s=await this.init();return new Promise((a,r)=>{let i=s.transaction(e,"readwrite").objectStore(e),n=JSON.parse(JSON.stringify(t)),u=i.add(n);u.onsuccess=()=>a(),u.onerror=()=>r(u.error)})}async getAll(e){let t=await this.init();return new Promise((s,a)=>{let r=t.transaction(e,"readonly").objectStore(e).getAll();r.onsuccess=()=>s(r.result),r.onerror=()=>a(r.error)})}async deleteAll(e){let t=await this.init();return new Promise((s,a)=>{let r=t.transaction(e,"readwrite").objectStore(e).clear();r.onsuccess=()=>s(e),r.onerror=()=>a(r.error)})}constructor(){this.database=null}}let l=u},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},38489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[481,935,600,103,256,441,517,358],()=>t(23044)),_N_E=e.O()}]);