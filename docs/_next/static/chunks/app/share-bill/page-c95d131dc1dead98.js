(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{79516:(e,n,t)=>{Promise.resolve().then(t.bind(t,82348))},82348:(e,n,t)=>{"use strict";t.r(n),t.d(n,{ShareBill:()=>en,default:()=>et});var i=t(95155),l=t(12115),r=t(26509),a=t(9014),o=t(79005),s=t(82957),d=t(93779),c=t(9365),u=t(99373),m=function(e){return e.ShareByMember="ShareByMember",e.ShareByFood="ShareByFood",e}({}),h=t(5050),x=t(18198),p=t(22810),j=t(2796),v=t(76237),g=t(89351),y=t(242),A=t(35153),b=t(96030),f=t(99425);t(6536);var S=t(65872),C=t(42707),k=t(45100),B=t(97838),w=t(7787),q=t(97295),I=t(49113),M=t.n(I);let F=function(e){let{foodList:n,memberList:t,billItems:r,setBillItems:a,shippingFee:s,setShippingFee:d,discountAmount:c,setDiscountAmount:u,calculatorMode:y,setCalculatorMode:S}=e,[C,I]=l.useState(),[F,T]=l.useState(!1),L=l.useCallback(e=>{let t=M().keyBy(n,"id");return(0,i.jsx)(h.A,{size:"large",children:r.filter(n=>n.member===e&&n.quantity>0).map(e=>{var n,l;return(0,i.jsx)(k.A,{bordered:!1,color:"blue",children:e.quantity>1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.A,{count:e.quantity,color:"green"}),null===(n=t[e.food])||void 0===n?void 0:n.name]}):null===(l=t[e.food])||void 0===l?void 0:l.name},e.id)})})},[r,n]),N=l.useMemo(()=>(0,i.jsx)(w.A,{dataSource:t.filter(e=>e.name),renderItem:e=>(0,i.jsx)(w.A.Item,{actions:[(0,i.jsx)(o.Ay,{type:"primary",onClick:()=>{I(e),T(!0)},children:"Sửa"},"edit")],children:(0,i.jsx)(w.A.Item.Meta,{title:e.name,description:L(e.id)})})}),[L,t]),G=l.useCallback((e,n,t)=>{a(r.map(i=>i.food===n&&i.member===t?{...i,quantity:e}:i))},[r,a]),P=l.useCallback((e,n)=>{a(r.map(t=>t.food===e&&t.member===n?{...t,quantity:Math.max(t.quantity-1,0)}:t))},[r,a]),_=l.useCallback((e,n)=>{a(r.map(t=>t.food===e&&t.member===n?{...t,quantity:t.quantity+1}:t))},[r,a]),D=l.useMemo(()=>(0,i.jsx)(w.A,{dataSource:n.filter(e=>e.name),renderItem:e=>{var n;let t=r.find(n=>n.food===e.id&&n.member===(null==C?void 0:C.id)),l=null!==(n=null==t?void 0:t.quantity)&&void 0!==n?n:0;return(0,i.jsx)(w.A.Item,{actions:[(0,i.jsxs)(h.A,{children:[l>0&&(0,i.jsx)(o.Ay,{shape:"circle",onClick:()=>{var e,n;return P(null!==(e=null==t?void 0:t.food)&&void 0!==e?e:"",null!==(n=null==C?void 0:C.id)&&void 0!==n?n:"")},icon:(0,i.jsx)(A.A,{}),size:"small"}),l>0&&(0,i.jsx)(x.A,{value:l,onChange:e=>{var n,i;return G(null!=e?e:0,null!==(n=null==t?void 0:t.food)&&void 0!==n?n:"",null!==(i=null==C?void 0:C.id)&&void 0!==i?i:"")},style:{width:50},formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),(0,i.jsx)(o.Ay,{shape:"circle",icon:(0,i.jsx)(b.A,{}),size:"small",onClick:()=>{var e,n;return _(null!==(e=null==t?void 0:t.food)&&void 0!==e?e:"",null!==(n=null==C?void 0:C.id)&&void 0!==n?n:"")}})]},"change-quantity")],children:(0,i.jsx)(w.A.Item.Meta,{title:e.name})})}}),[r,null==C?void 0:C.id,n,_,G,P]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)(v.A,{labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",children:[(0,i.jsxs)(p.A,{gutter:[20,20],children:[(0,i.jsx)(j.A,{span:24,md:12,children:(0,i.jsx)(f.A,{label:"Ph\xed vận chuyện + phụ ph\xed",children:(0,i.jsx)(x.A,{value:s,onChange:e=>d(null!=e?e:0),suffix:"đ",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),step:1e3,style:{width:"100%"}})})}),(0,i.jsx)(j.A,{span:24,md:12,children:(0,i.jsx)(f.A,{label:"Giảm gi\xe1",children:(0,i.jsx)(x.A,{value:c,onChange:e=>u(null!=e?e:0),suffix:"đ",step:1e3,formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),style:{width:"100%"}})})})]}),(0,i.jsx)(p.A,{gutter:[20,20],children:(0,i.jsx)(j.A,{span:24,md:12,children:(0,i.jsx)(v.A.Item,{name:"radio-button",label:"C\xe1ch chia",children:(0,i.jsxs)(g.Ay.Group,{onChange:e=>S(e.target.value),value:y,children:[(0,i.jsx)(g.Ay,{value:m.ShareByMember,children:"Chia theo đầu người"}),(0,i.jsx)(g.Ay,{value:m.ShareByFood,children:"Chia theo m\xf3n"})]})})})})]}),N,(0,i.jsx)(q.A,{open:F,title:null==C?void 0:C.name,closeIcon:!1,footer:(0,i.jsx)(o.Ay,{type:"primary",onClick:()=>T(!1),children:"Xong"}),children:D})]})},T=e=>{let{foodList:n,memberList:t,billItems:r,setBillItems:a,shippingFee:s,setShippingFee:d,discountAmount:c,setDiscountAmount:u,calculatorMode:k,setCalculatorMode:B}=e,w=(0,S.G)(),q=[{title:"T\xean m\xf3n",dataIndex:"foodName",key:"foodName"}].concat(t.filter(e=>e.name).map(e=>({title:e.name,dataIndex:e.id,key:e.id,render:(n,t)=>(0,i.jsxs)(h.A,{children:[n>0&&(0,i.jsx)(o.Ay,{shape:"circle",onClick:()=>{var n,i;return n=t.foodId,i=e.id,void a(r.map(e=>e.food===n&&e.member===i?{...e,quantity:Math.max(e.quantity-1,0)}:e))},icon:(0,i.jsx)(A.A,{}),size:"small"}),n>0&&(0,i.jsx)(x.A,{value:n,onChange:n=>{var i,l,o;return i=null!=n?n:0,l=t.foodId,o=e.id,void a(r.map(e=>e.food===l&&e.member===o?{...e,quantity:i}:e))},style:{width:50},formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),(0,i.jsx)(o.Ay,{shape:"circle",icon:(0,i.jsx)(b.A,{}),size:"small",onClick:()=>{var n,i;return n=t.foodId,i=e.id,void a(r.map(e=>e.food===n&&e.member===i?{...e,quantity:e.quantity+1}:e))}})]})}))),I=l.useMemo(()=>{let e=[];for(let i of n.filter(e=>e.name)){let n={key:i.id,foodName:i.name,foodId:i.id,quantity:0};for(let e of t.filter(e=>e.name)){let t=r.find(n=>n.food===i.id&&n.member===e.id);n[e.id]=t?t.quantity:0}e.push(n)}return e},[n,t,r]);return w?(0,i.jsxs)(p.A,{children:[(0,i.jsx)(j.A,{span:24,children:(0,i.jsxs)(v.A,{labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",children:[(0,i.jsxs)(p.A,{gutter:[20,20],children:[(0,i.jsx)(j.A,{span:24,md:12,children:(0,i.jsx)(f.A,{label:"Ph\xed vận chuyện + phụ ph\xed",children:(0,i.jsx)(x.A,{value:s,onChange:e=>d(null!=e?e:0),suffix:"đ",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),step:1e3,style:{width:"100%"}})})}),(0,i.jsx)(j.A,{span:24,md:12,children:(0,i.jsx)(f.A,{label:"Giảm gi\xe1",children:(0,i.jsx)(x.A,{value:c,onChange:e=>u(null!=e?e:0),suffix:"đ",step:1e3,formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),style:{width:"100%"}})})})]}),(0,i.jsx)(p.A,{gutter:[20,20],children:(0,i.jsx)(j.A,{span:24,md:12,children:(0,i.jsx)(v.A.Item,{name:"radio-button",label:"C\xe1ch chia",children:(0,i.jsxs)(g.Ay.Group,{onChange:e=>B(e.target.value),value:k,children:[(0,i.jsx)(g.Ay,{value:m.ShareByMember,children:"Chia theo đầu người"}),(0,i.jsx)(g.Ay,{value:m.ShareByFood,children:"Chia theo m\xf3n"})]})})})})]})}),!w&&(0,i.jsx)(C.A,{children:"Giao diện d\xe0nh ri\xeang cho điện thoại sẽ sớm được cập nhật"}),(0,i.jsx)(j.A,{span:24,children:(0,i.jsx)(y.A,{scroll:{y:275,x:"max-content"},columns:q,dataSource:I,pagination:!1,className:"share-bill-table"})})]}):(0,i.jsx)(F,{foodList:n,memberList:t,billItems:r,setBillItems:a,shippingFee:s,setShippingFee:d,discountAmount:c,setDiscountAmount:u,calculatorMode:k,setCalculatorMode:B})};var L=t(29288),N=t(78723);function G(e){return M().isNil(e)?"":new Intl.NumberFormat("en-US").format(e)}let{Text:P}=L.A,_=function(e){var n;let{dataSource:t,memberList:r,foodList:a,billItems:o}=e,s=M().keyBy(r,"id"),d=M().keyBy(a,"id"),[u,m]=l.useState(),[h,x]=l.useState(!1),p=l.useMemo(()=>o.filter(e=>e.member===(null==u?void 0:u.member)&&e.quantity>0).map((e,n)=>{var t,l,r;return(0,i.jsxs)("div",{children:[0!==n&&(0,i.jsx)(c.A,{}),"T\xean m\xf3n: ",null===(t=d[e.food])||void 0===t?void 0:t.name,(0,i.jsx)("br",{}),"Số lượng: ",e.quantity,(0,i.jsx)("br",{}),"Gi\xe1 tiền: ",G(null!==(r=null===(l=d[e.food])||void 0===l?void 0:l.price)&&void 0!==r?r:0)]},e.id)}),[o,d,null==u?void 0:u.member]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.A,{dataSource:t,itemLayout:"horizontal",renderItem:e=>{var n;return(0,i.jsxs)(w.A.Item,{actions:[(0,i.jsx)("a",{onClick:()=>{x(!0),m(e)},children:"Chi tiết"},"detail")],children:[(0,i.jsx)(w.A.Item.Meta,{title:null===(n=s[e.member])||void 0===n?void 0:n.name}),(0,i.jsx)("div",{children:G(e.money)})]})}}),(0,i.jsxs)(q.A,{onCancel:()=>x(!1),open:h,title:M().get(s,[null!==(n=null==u?void 0:u.member)&&void 0!==n?n:"","name"]),footer:null,children:["Tổng phải trả: ",(0,i.jsx)(P,{strong:!0,children:G(null==u?void 0:u.money)}),(0,i.jsx)(c.A,{}),p,(0,i.jsx)(c.A,{}),"Tổng tiền: ",(0,i.jsx)(P,{strong:!0,children:G(null==u?void 0:u.totalFood)}),(0,i.jsx)("br",{}),"Ph\xed ship:"," ",(0,i.jsx)(P,{strong:!0,children:G(null==u?void 0:u.shippingFee)}),(0,i.jsx)("br",{}),"Giảm gi\xe1:"," ",(0,i.jsx)(P,{strong:!0,children:G(null==u?void 0:u.discountAmount)})]})]})},{Text:D}=L.A,O=e=>{let{foodList:n,billItems:t,memberList:r,calculatorMode:a,discountAmount:o,shippingFee:s}=e,d=M().keyBy(r,"id"),c=(0,S.G)(),u=l.useCallback(e=>{let l=M().keyBy(n,"id");return(0,i.jsx)(h.A,{size:"large",children:t.filter(n=>n.member===e&&n.quantity>0).map(e=>{var n,t,r;return(0,i.jsx)(B.A,{count:(0,N.z)(null!==(r=l[e.food].price)&&void 0!==r?r:0),color:"pink",children:(0,i.jsx)(k.A,{bordered:!1,color:"blue",children:e.quantity>1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.A,{count:e.quantity,color:"green"}),null===(n=l[e.food])||void 0===n?void 0:n.name]}):null===(t=l[e.food])||void 0===t?void 0:t.name})},e.id)})})},[t,n]),x=[{title:"T\xean th\xe0nh vi\xean",dataIndex:"member",key:"member",render:e=>{var n,t;return(0,i.jsx)(w.A.Item.Meta,{title:null!==(t=null===(n=d[e])||void 0===n?void 0:n.name)&&void 0!==t?t:"",description:u(e)})}},{title:"Tổng phải trả",dataIndex:"money",key:"money",align:"right",render:e=>(0,i.jsx)(D,{strong:!0,children:G(e)})},{title:"Tổng tiền m\xf3n",dataIndex:"totalFood",align:"right",render:e=>G(e)},{title:"Ph\xed Ship",dataIndex:"shippingFee",align:"right",render:e=>G(e)},{title:"Giảm gi\xe1",dataIndex:"discountAmount",align:"right",render:e=>"-"+G(e)}],p=l.useMemo(()=>{let e=t.filter(e=>e.quantity>0&&e.member&&e.food),i=M().groupBy(e,"member"),l=M().keyBy(n,"id"),r=Object.keys(i).length,d=M().sumBy(e,"quantity"),c=M().round(s/r),u=M().round(s/d),h=M().round(o/r),x=M().round(o/d),p=M().round((s-o)/r),j=M().round((s-o)/d);return a===m.ShareByMember?Object.entries(i).map(e=>{let[n,t]=e,i=M().sumBy(t,e=>{var n;let t=l[e.food];return(null!==(n=null==t?void 0:t.price)&&void 0!==n?n:0)*e.quantity});return{key:n,member:n,totalFood:i,shippingFee:c,discountAmount:h,money:M().round(i+p)}}):Object.entries(i).map(e=>{let[n,t]=e,i=M().sumBy(t,e=>{var n;let t=l[e.food];return(null!==(n=null==t?void 0:t.price)&&void 0!==n?n:0)*e.quantity}),r=M().sumBy(t.filter(e=>e.member===n),"quantity");return{key:n,member:n,totalFood:i,shippingFee:u*r,discountAmount:x*r,money:M().round(i+j)}})},[t,a,o,n,s]);return c?(0,i.jsx)(y.A,{columns:x,dataSource:p,pagination:!1}):(0,i.jsx)(_,{billItems:t,dataSource:p,memberList:r,foodList:n})};var z=t(13697),Y=t(35906),H=t(25848),R=t(29214);let E="SHARE_BILL";var K=t(21455),J=t.n(K),X=t(41657);let{Title:Q,Paragraph:U}=L.A,$=function(e){let{foodList:n,setFoodList:t,memberList:r,setMemberList:a}=e,o=Math.max(n.length,r.length),s=(0,S.G)(),[d,u]=l.useState(!1),m=l.useCallback((e,n)=>{let t=r.map((t,i)=>n===i?{...t,name:e}:t);n===r.length-1&&t.push({id:(0,z.A)(),name:""}),a(t)},[r,a]),h=l.useCallback((e,i)=>{let l=n.map((n,t)=>i===t?{...n,name:e}:n);i===n.length-1&&l.push({id:(0,z.A)(),name:"",price:null}),t(l)},[n,t]),v=l.useCallback((e,i)=>{let l=n.map((n,t)=>i===t?{...n,price:null!=e?e:0}:n);i===n.length-1&&l.push({id:(0,z.A)(),name:"",price:null!=e?e:null}),t(l)},[n,t]),g=l.useMemo(()=>{let e=[];for(let f=0;f<o;f++){var t,l,a,d,u,g,y,A,b;e.push((0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.A,{gutter:[10,10],style:{marginBottom:8},children:[(0,i.jsx)(j.A,{span:24,md:10,children:r[f]&&(0,i.jsx)(X.A,{value:null!==(u=null===(t=r[f])||void 0===t?void 0:t.name)&&void 0!==u?u:null,placeholder:s?"Tab để sang \xf4 kế tiếp":"T\xean th\xe0nh vi\xean",onChange:e=>m(e.target.value,f)})}),n[f]?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.A,{span:24,md:10,children:(0,i.jsx)(X.A,{value:null!==(g=null===(l=n[f])||void 0===l?void 0:l.name)&&void 0!==g?g:null,placeholder:s?"Tab để sang \xf4 kế tiếp":"T\xean m\xf3n",onChange:e=>h(e.target.value,f)})}),(0,i.jsx)(j.A,{span:24,md:4,children:(0,i.jsx)(x.A,{style:{width:"100%"},value:null!==(y=null===(a=n[f])||void 0===a?void 0:a.price)&&void 0!==y?y:null,formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),placeholder:s?"Tab để sang \xf4 kế tiếp":"Gi\xe1 tiền",onChange:e=>v(e,f),suffix:"đ",step:1e3})})]}):null]},null!==(b=null!==(A=null===(d=r[f])||void 0===d?void 0:d.id)&&void 0!==A?A:n[f].id)&&void 0!==b?b:f),f<o-1&&!s&&(0,i.jsx)(c.A,{})]}))}return e},[n,s,o,r,h,m,v]);return(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsxs)(p.A,{gutter:[10,10],children:[(0,i.jsx)(j.A,{span:24,md:10,children:(0,i.jsx)(Q,{level:5,children:"T\xean th\xe0nh vi\xean"})}),(0,i.jsx)(j.A,{span:24,md:10,children:(0,i.jsx)(Q,{level:5,children:"T\xean m\xf3n"})}),(0,i.jsx)(j.A,{span:24,md:4,children:(0,i.jsx)(Q,{level:5,children:"Gi\xe1 tiền"})})]}),g,(0,i.jsx)(p.A,{children:(0,i.jsx)(j.A,{span:24,children:(0,i.jsx)("a",{onClick:()=>u(!0),children:"C\xf3 nhiều người đặt m\xf3n giống nhau?"})})}),(0,i.jsxs)(q.A,{footer:null,open:d,onCancel:()=>u(!1),children:[(0,i.jsx)(Q,{level:4,children:"C\xf3 nhiều hơn một người c\xf9ng đặt m\xf3n giống nhau?"}),(0,i.jsx)(U,{children:"Đừng lo. Bạn chỉ cần nhập t\xean những người ấy v\xe0o \xf4 t\xean th\xe0nh vi\xean ở cuối danh s\xe1ch v\xe0 bỏ trống c\xe1c cột t\xean m\xf3n v\xe0 gi\xe1. Giao diện ở bước tiếp theo sẽ cho bạn lựa chọn những người n\xe0o đặt m\xf3n ấy."}),(0,i.jsx)(Q,{level:4,children:"C\xf3 một người đặt nhiều m\xf3n?"}),(0,i.jsx)(U,{children:"Cũng tương tự như tr\xean. Bạn chỉ việc nhập t\xean v\xe0 gi\xe1 của m\xf3n đ\xf3 ở cột t\xean v\xe0 m\xf3n v\xe0o cuối danh s\xe1ch. Giao diện ở bước tiếp theo sẽ gi\xfap bạn lựa chọn người n\xe0o đặt những m\xf3n n\xe0o."})]})]})},V=function(e){let{setStartTransaction:n}=e,{token:t}=s.A.useToken(),[h,x]=l.useState(0),[p,j]=l.useState([{id:(0,z.A)(),name:"",price:null}]),[v,g]=l.useState([{id:(0,z.A)(),name:""}]),[y,A]=l.useState([]),[b,f]=l.useState(0),[C,k]=l.useState(0),[B,w]=l.useState(m.ShareByMember),{mutate:q}=function(){let e=(0,Y.jE)();return(0,H.n)({mutationFn:R.wN,onSuccess(){e.invalidateQueries({queryKey:[E]})}})}(),I=(0,S.G)(),M=[{title:"Nhập dữ liệu",content:(0,i.jsx)($,{foodList:p,setFoodList:j,memberList:v,setMemberList:g})},{title:"Chia tiền",content:(0,i.jsx)(T,{foodList:p,memberList:v,billItems:y,setBillItems:A,shippingFee:b,setShippingFee:f,discountAmount:C,setDiscountAmount:k,calculatorMode:B,setCalculatorMode:w})},{title:"Kết quả",content:(0,i.jsx)(O,{foodList:p,billItems:y,calculatorMode:B,shippingFee:b,discountAmount:C,memberList:v})}],F=()=>{let e=[];for(let[n,t]of p.filter(e=>e.name).entries())for(let[i,l]of v.filter(e=>e.name).entries())e.push({id:(0,z.A)(),food:t.id,member:l.id,quantity:n===i?1:0});A(e)},L=()=>{h===M.length-3&&F(),x(h+1)},N=()=>{x(h-1)},G=()=>{q({foodList:p,memberList:v,billItems:y,shippingFee:b,discountAmount:C,calculatorMode:B,created_at:new Date,id:(0,z.A)(),name:"Chia tiền ng\xe0y ".concat(J()().format("DD/MM/YYYY HH:mm:ss"))}),j([{id:(0,z.A)(),name:"",price:null}]),g([{id:(0,z.A)(),name:""}]),A([]),f(0),x(0),k(0),w(m.ShareByMember),n(!1)},P=M.map(e=>({key:e.title,title:e.title})),_={color:t.colorTextTertiary,borderRadius:t.borderRadiusLG};return(0,i.jsx)(r.A,{justify:"center",align:"center",style:{height:"100vh",background:"url('/ban-tiec.jpeg')",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",padding:20,overflow:"auto"},children:(0,i.jsxs)(a.A,{style:{width:"100%",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)"},styles:{body:{overflow:"auto",height:"calc(100vh - 100px)"}},children:[(0,i.jsx)(d.A,{current:h,items:P}),!I&&(0,i.jsx)(c.A,{}),(0,i.jsx)("div",{style:_,className:"transaction-wrapper",children:M[h].content}),(0,i.jsx)(c.A,{}),(0,i.jsxs)("div",{children:[h<M.length-1&&(0,i.jsx)(o.Ay,{type:"primary",onClick:()=>L(),children:"Tiếp"}),h===M.length-1&&(0,i.jsx)(o.Ay,{type:"primary",onClick:()=>{u.Ay.success("Processing complete!"),G()},children:"Xong"}),h>0&&(0,i.jsx)(o.Ay,{style:{margin:"0 8px"},onClick:()=>N(),children:"Trước"})]})]})})};var W=t(547);let{Title:Z}=L.A,ee=function(){let{data:e}=(0,W.I)({queryKey:[E],queryFn:()=>(0,R.HM)()}),[n,t]=l.useState(null),[r,a]=l.useState(!1),o=[{title:"T\xean",dataIndex:"name",key:"name",render:(e,n)=>(0,i.jsx)("a",{onClick:()=>{t(n),a(!0)},children:e})}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z,{level:3,children:"Lịch sử"}),(0,i.jsx)(y.A,{columns:o,dataSource:e,pagination:!1,className:"share-bill-table"}),(0,i.jsx)(q.A,{footer:!1,open:r,onCancel:()=>a(!1),width:{xs:"90%",sm:"90%",md:"90%",lg:"80%",xl:"70%",xxl:"60%"},children:n&&(0,i.jsx)(O,{billItems:n.billItems,calculatorMode:n.calculatorMode,shippingFee:n.shippingFee,discountAmount:n.discountAmount,foodList:n.foodList,memberList:n.memberList})})]})},en=()=>{let[e,n]=l.useState(!1);return e?(0,i.jsx)(V,{setStartTransaction:n}):(0,i.jsx)(r.A,{justify:"center",align:"center",className:"app-container",style:{background:"url('/chia-tien.jpeg')"},children:(0,i.jsxs)(a.A,{title:"Chia tiền ho\xe1 đơn",className:"app-card share-bill-card",children:[(0,i.jsx)(r.A,{justify:"center",align:"center",children:(0,i.jsx)(o.Ay,{size:"large",type:"primary",onClick:()=>{n(!0)},children:"Bắt đầu"})}),(0,i.jsx)(ee,{})]})})},et=en},29214:(e,n,t)=>{"use strict";t.d(n,{Bu:()=>d,HM:()=>m,l_:()=>u,wN:()=>h});var i=t(21455),l=t.n(i),r=t(56818),a=t(14449),o=t(49113),s=t.n(o);let d=a.Oh.addCollection(r.q.ShareBill);class c extends a.Ay{getShareBill(){return super.getAll(this.store)}async syncShareBill(){let e=d.find({});for(let n of(await super.deleteAll(this.store),e)){let e=s().omit(n,["$loki","meta"]);await super.save(this.store,e)}return e}constructor(...e){super(...e),this.store=r.q.ShareBill}}let u=new c;function m(){return d.find({}).sort((e,n)=>new Date(n.created_at).getTime()>new Date(e.created_at).getTime()?1:-1)}async function h(e){let n=await Promise.resolve(d.insert({...e,name:"Chia tiền ng\xe0y ".concat(l()().format("DD/MM/YYYY HH:mm:ss")),created_at:l()().toDate()}));return await u.syncShareBill(),n}},56818:(e,n,t)=>{"use strict";t.d(n,{q:()=>i});var i=function(e){return e.RandomList="random_list",e.ShareBill="share_bill",e}({})},14449:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>s,Oh:()=>a});var i=t(51288),l=t.n(i),r=t(56818);let a=new(l())("anuong.db");class o{async init(){return this.database?this.database:new Promise((e,n)=>{let t=window.indexedDB.open("anuong",1);t.onupgradeneeded=()=>{let e=t.result;e.objectStoreNames.contains(r.q.RandomList)||e.createObjectStore(r.q.RandomList,{keyPath:"id",autoIncrement:!0}),e.objectStoreNames.contains(r.q.ShareBill)||e.createObjectStore(r.q.ShareBill,{keyPath:"id",autoIncrement:!0})},t.onsuccess=()=>{this.database=t.result,e(this.database)},t.onerror=()=>{n(t.error)}})}async save(e,n){let t=await this.init();return new Promise((i,l)=>{let r=t.transaction(e,"readwrite").objectStore(e),a=JSON.parse(JSON.stringify(n)),o=r.add(a);o.onsuccess=()=>i(),o.onerror=()=>l(o.error)})}async getAll(e){let n=await this.init();return new Promise((t,i)=>{let l=n.transaction(e,"readonly").objectStore(e).getAll();l.onsuccess=()=>t(l.result),l.onerror=()=>i(l.error)})}async deleteAll(e){let n=await this.init();return new Promise((t,i)=>{let l=n.transaction(e,"readwrite").objectStore(e).clear();l.onsuccess=()=>t(e),l.onerror=()=>i(l.error)})}constructor(){this.database=null}}let s=o},65872:(e,n,t)=>{"use strict";t.d(n,{G:()=>r});var i=t(12115),l=t(12942);let r=()=>{var e;let[n,t]=i.useState(null),r=(0,l.A)(n),a=(null!==(e=null==r?void 0:r.width)&&void 0!==e?e:0)>=768;return(0,i.useEffect)(()=>{var e,n;t(null===(n=window)||void 0===n?void 0:null===(e=n.document)||void 0===e?void 0:e.body)},[]),a}},6536:()=>{}},e=>{var n=n=>e(e.s=n);e.O(0,[65,935,600,103,838,256,529,474,441,517,358],()=>n(79516)),_N_E=e.O()}]);